import{useStores as e,defineDisplay as t}from"@directus/extensions-sdk";import{defineComponent as a,resolveComponent as n,resolveDirective as i,openBlock as l,createBlock as o,withCtx as s,createElementVNode as r,withModifiers as f,withDirectives as d,createCommentVNode as p,createElementBlock as u,normalizeClass as c,toDisplayString as y,createVNode as m,Transition as h}from"vue";const v={url:"",email:"mailto:",tel:"tel:"},x={url:"Open",email:"Send email to",tel:"Call"};var _=a({props:{value:{type:String,default:null},kind:{type:String,default:"url"},showLinkButton:{type:Boolean,default:!0},icon:{type:String,default:"open_in_new"},showUrl:{type:Boolean,default:!0},font:{type:String,default:"sans-serif",validator:e=>["sans-serif","serif","monospace"].includes(e)},showClipboard:{type:Boolean,default:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},showPrefix:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1}},setup(t){const{useNotificationsStore:a}=e(),n=a(),i=t.showPrefix?t.prefix:"",l=t.showSuffix?t.suffix:"",o=`${i}${t.value}${l}`,s=`${v[t.kind]}${o}`;return{verb:x[t.kind],href:s,url:o,copyToClipboard:async function(){var e;try{await(null===(e=null===navigator||void 0===navigator?void 0:navigator.clipboard)||void 0===e?void 0:e.writeText(s)),n.add({title:"Copied!",type:"success"})}catch(e){e instanceof Error&&n.add({title:"Error!",type:"error",error:e})}}}}});const b={class:"ext-display-link__wrapper"},w=["href"];var k=[],g=[];!function(e,t){if(e&&"undefined"!=typeof document){var a,n=!0===t.prepend?"prepend":"append",i=!0===t.singleTag,l="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=k.indexOf(l);-1===o&&(o=k.push(l)-1,g[o]={}),a=g[o]&&g[o][n]?g[o][n]:g[o][n]=s()}else a=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),i=0;i<a.length;i++)e.setAttribute(a[i],t.attributes[a[i]]);var o="prepend"===n?"afterbegin":"beforeend";return l.insertAdjacentElement(o,e),e}}("\n.ext-display-link {\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n}\n.ext-display-link__wrapper {\n  display: flex;\n  line-height: 18px;\n}\n.ext-display-link__url {\n  flex-shrink: 1;\n  overflow: hidden;\n}\n.ext-display-link__url.sans-serif {\n  font-family: var(--family-sans-serif);\n}\n.ext-display-link__url.serif {\n  font-family: var(--family-serif);\n}\n.ext-display-link__url.monospace {\n  font-family: var(--family-monospace);\n}\n.ext-display-link__icon,\n.ext-display-link__clip {\n  --v-icon-size: 18px;\n}\n.ext-display-link__icon:hover,\n.ext-display-link__clip:hover {\n  --v-icon-color: var(--primary);\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n",{}),_.render=function(e,t,a,v,x,_){const k=n("value-null"),g=n("v-icon"),S=n("v-hover"),$=i("tooltip");return null===e.value?(l(),o(k,{key:0})):(l(),o(S,{key:1,class:"ext-display-link"},{default:s((({hover:a})=>[r("div",b,[r("a",{href:e.href,target:"_blank",onClick:t[0]||(t[0]=f((()=>{}),["stop"]))},[e.showLinkButton?d((l(),o(g,{key:0,class:"ext-display-link__icon",name:e.icon,left:""},null,8,["name"])),[[$,`${e.verb} ${e.url}`]]):p("v-if",!0)],8,w),e.showUrl?(l(),u("span",{key:0,class:c([[e.font],"ext-display-link__url"])},y(e.url),3)):p("v-if",!0),m(h,{name:"fade"},{default:s((()=>[!e.showClipboard||e.showUrl&&!a?p("v-if",!0):d((l(),o(g,{key:0,class:"ext-display-link__clip",right:"",name:"content_copy",onClick:f(e.copyToClipboard,["stop"])},null,8,["onClick"])),[[$,`Copy to clipboard \n ${e.href}`]])])),_:2},1024)])])),_:1}))},_.__file="src/display.vue";var S=t({id:"extension-display-link",name:"Link",icon:"open_in_new",description:"Display URLs, phone numbers, and emails with a link button",component:_,options:[{field:"kind",name:"Type",meta:{width:"full",interface:"select-dropdown",options:{choices:[{text:"URL",value:"url"},{text:"Telephone",value:"tel"},{text:"Email",value:"email"}]}},schema:{default_value:"url"}},{field:"showLinkButton",name:"Show link button",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display a link button"}},schema:{default_value:!0}},{field:"icon",name:"$t:displays.formatted-value.icon",type:"string",meta:{width:"half",interface:"select-icon"},schema:{default_value:"open_in_new"}},{field:"showUrl",name:"Show URL",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display the URL"}},schema:{default_value:!0}},{field:"font",name:"$t:displays.formatted-value.font",meta:{width:"half",interface:"select-dropdown",options:{choices:[{text:"$t:displays.formatted-value.font_sans_serif",value:"sans-serif"},{text:"$t:displays.formatted-value.font_serif",value:"serif"},{text:"$t:displays.formatted-value.font_monospace",value:"monospace"}]}},schema:{default_value:"sans-serif"}},{field:"showClipboard",name:"Copy to clipboard",type:"boolean",meta:{interface:"boolean",width:"full",options:{label:"Display a copy to clipboard button"}},schema:{default_value:!0}},{field:"prefix",name:"$t:displays.formatted-value.prefix",type:"string",meta:{width:"half",interface:"input",options:{label:"$t:displays.formatted-value.prefix_label",placeholder:"https://",trim:!0}},schema:{default_value:""}},{field:"suffix",name:"$t:displays.formatted-value.suffix",type:"string",meta:{width:"half",interface:"input",options:{label:"$t:displays.formatted-value.suffix_label",trim:!0}},schema:{default_value:""}},{field:"showPrefix",name:"Show prefix",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display prefix in view"}},schema:{default_value:!1}},{field:"showSuffix",name:"Show suffix",type:"boolean",meta:{interface:"boolean",width:"half",options:{label:"Display suffix in view"}},schema:{default_value:!1}}],types:["string","text"]});export{S as default};
